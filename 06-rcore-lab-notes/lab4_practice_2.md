# 实验四（下）：线程调度

## 实验题目

1. 实验：了解并实现 Stride Scheduling 调度算法，为不同线程设置不同优先级，使得其获得与优先级成正比的运行时间。

   参考文献：[使用优先队列实现 Stride Scheduling](https://chyyuu.gitbooks.io/ucore_os_docs/lab6/lab6_3_6_2_priority_queue.html)

   我用优先队列实现了 Stride Scheduling 调度算法，代码地址：[lab4_practice_2](06-rcore-lab-notes/lab4_practice_2)

   该代码满足了基本需求，优先级越高的运行时间越短，优先级越低的运行时间越长，但是有一个缺点就是，如果所有的线程优先级相同，则会首尾两个线程交替运行，而不是退化成 FIFO 调度算法

2. 分析：

   * 在 Stride Scheduling 算法下，如果一个线程进入了一段时间的等待（例如等待输入，此时它不会被运行），会发生什么？

     该线程进入等待状态，然后让最高优先级的就绪态线程执行

   * 对于两个优先级分别为 9 和 1 的线程，连续 10 个时间片中，前者的运行次数一定更多吗？

     不一定，如果优先级为 9 的线程进入等待状态，那么在连续 10 个时间片内，优先级为 1 的线程运行次数会更多

   * 你认为 Stride Scheduling 算法有什么不合理之处？可以怎样改进？

     不合理之处：低优先级的线程会长时间在就绪状态等待

     改进方法：将优先级作为运行的概率大小，依概率选择下一个运行的线程
